<!-- HTML header for doxygen 1.8.13-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Robot Control Library: Start_stop</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<link rel="search" href="search_opensearch.php?v=opensearch.xml" type="application/opensearchdescription+xml" title="Robot Control Library"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="customdoxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Robot Control Library
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,true,'search.php','Search');
  $(document).ready(function() {
    if ($('.searchresults').length > 0) { searchBox.DOMSearchField().focus(); }
  });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group__start__stop.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Start_stop</div>  </div>
</div><!--header-->
<div class="contents">
<a name="details" id="details"></a><h2 class="groupheader">Description</h2>
<p>cleanly start and stop a process, signal handling, program flow </p>
<p>&lt;<a class="el" href="start__stop_8h.html">rc/start_stop.h</a>&gt;</p>
<p>It can be tricky to manage the starting and stopping of mutiple threads and loops. Since the robot control library has several background threads in addition to any user-created threads, we encourage the use of the consolidated high-level process control method described here. These functions allow easy implementation of good-practice process handling including a global shutdown flag, a signal handler, making &amp; deleting a PID file, stopping previously running copies of a program, and stopping a program when it's in the background.</p>
<p>The rc_state_t struct tries to cover the majority of use cases in the context of a robotics application. The user should start their program main() function by setting the state to UNINITIALIZED and enabling the signal handler before doing hardware initialization and starting threads. When the user's own initialization sequence is complete they should set the flow state to PAUSED or RUNNING to indicate to the newly created threads that the program should now behave in normal ongoing operational mode.</p>
<p>During normal operation, the user may elect to implement a PAUSED state where the user's threads may keep running to read sensors but do not actuate motors, leaving their robot in a safe state. For example, pressing the pause button could be assigned to change this state back and forth between RUNNING and PAUSED. This is entirely optional.</p>
<p>The most important state here is EXITING. The signal handler described here intercepts the SIGINT signal when the user presses Ctrl-C and sets the state to EXITING. It is then up to the user's threads to watch for this condition and exit cleanly. The user may also set the state to EXITING at any time to trigger the closing of their own threads and robot control library's own background threads.</p>
<p>The flow state variable is kept in the robot control library's memory space and should be read and modified by the <a class="el" href="group__start__stop.html#ga08307c9805692eb084112cbcae4b744f" title="fetches the current process state as set by the user or signal handler ">rc_get_state()</a> and <a class="el" href="group__start__stop.html#ga693e5b9f051bb14507d1d9eb246f616e" title="sets the current process state. ">rc_set_state()</a> functions above. The user may optionally use the <a class="el" href="group__start__stop.html#ga82b35235986818b68c56251fbd6ad27b" title="prints the process state to stdout in human-readble form ">rc_print_state()</a> function to print a human readable version of the state enum to the screen. </p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:gabf72a3607c241faf7f4b9094253af7a1"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__start__stop.html#gabf72a3607c241faf7f4b9094253af7a1">RC_PID_DIR</a>&#160;&#160;&#160;&quot;/run/shm/&quot;</td></tr>
<tr class="separator:gabf72a3607c241faf7f4b9094253af7a1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1717e01e4309df6c7c93a48084f5ffb9"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__start__stop.html#ga1717e01e4309df6c7c93a48084f5ffb9">RC_PID_FILE</a>&#160;&#160;&#160;&quot;/run/shm/robotcontrol.pid&quot;</td></tr>
<tr class="separator:ga1717e01e4309df6c7c93a48084f5ffb9"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:ga57a9d2bfa9bcfe9253367c3852430fde"><td class="memItemLeft" align="right" valign="top">typedef enum <a class="el" href="group__start__stop.html#gac4ff093ea579df8514825b1e601d38f9">rc_state_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__start__stop.html#ga57a9d2bfa9bcfe9253367c3852430fde">rc_state_t</a></td></tr>
<tr class="memdesc:ga57a9d2bfa9bcfe9253367c3852430fde"><td class="mdescLeft">&#160;</td><td class="mdescRight">process state variable, read and modify by rc_get_state, rc_set_state, and rc_print_state. Starts as UNINITIALIZED.  <a href="#ga57a9d2bfa9bcfe9253367c3852430fde">More...</a><br /></td></tr>
<tr class="separator:ga57a9d2bfa9bcfe9253367c3852430fde"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga08307c9805692eb084112cbcae4b744f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__start__stop.html#gac4ff093ea579df8514825b1e601d38f9">rc_state_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__start__stop.html#ga08307c9805692eb084112cbcae4b744f">rc_get_state</a> (void)</td></tr>
<tr class="memdesc:ga08307c9805692eb084112cbcae4b744f"><td class="mdescLeft">&#160;</td><td class="mdescRight">fetches the current process state as set by the user or signal handler  <a href="#ga08307c9805692eb084112cbcae4b744f">More...</a><br /></td></tr>
<tr class="separator:ga08307c9805692eb084112cbcae4b744f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga693e5b9f051bb14507d1d9eb246f616e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__start__stop.html#ga693e5b9f051bb14507d1d9eb246f616e">rc_set_state</a> (<a class="el" href="group__start__stop.html#gac4ff093ea579df8514825b1e601d38f9">rc_state_t</a> new_state)</td></tr>
<tr class="memdesc:ga693e5b9f051bb14507d1d9eb246f616e"><td class="mdescLeft">&#160;</td><td class="mdescRight">sets the current process state.  <a href="#ga693e5b9f051bb14507d1d9eb246f616e">More...</a><br /></td></tr>
<tr class="separator:ga693e5b9f051bb14507d1d9eb246f616e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga82b35235986818b68c56251fbd6ad27b"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__start__stop.html#ga82b35235986818b68c56251fbd6ad27b">rc_print_state</a> (void)</td></tr>
<tr class="memdesc:ga82b35235986818b68c56251fbd6ad27b"><td class="mdescLeft">&#160;</td><td class="mdescRight">prints the process state to stdout in human-readble form  <a href="#ga82b35235986818b68c56251fbd6ad27b">More...</a><br /></td></tr>
<tr class="separator:ga82b35235986818b68c56251fbd6ad27b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga855a2fced34e4dfaaea9cb6a2bc7fc07"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__start__stop.html#ga855a2fced34e4dfaaea9cb6a2bc7fc07">rc_make_pid_file</a> (void)</td></tr>
<tr class="memdesc:ga855a2fced34e4dfaaea9cb6a2bc7fc07"><td class="mdescLeft">&#160;</td><td class="mdescRight">Makes a PID file RC_PID_FILE (/run/shm/robotcontrol.pid) containing the current PID of your process.  <a href="#ga855a2fced34e4dfaaea9cb6a2bc7fc07">More...</a><br /></td></tr>
<tr class="separator:ga855a2fced34e4dfaaea9cb6a2bc7fc07"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac636ff375209b0261865875e168af8f6"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__start__stop.html#gac636ff375209b0261865875e168af8f6">rc_kill_existing_process</a> (float timeout_s)</td></tr>
<tr class="memdesc:gac636ff375209b0261865875e168af8f6"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function is used to make sure any existing program using the PID file is stopped.  <a href="#gac636ff375209b0261865875e168af8f6">More...</a><br /></td></tr>
<tr class="separator:gac636ff375209b0261865875e168af8f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0f06d321e00e3963aa0d672ab0d06fe5"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__start__stop.html#ga0f06d321e00e3963aa0d672ab0d06fe5">rc_remove_pid_file</a> (void)</td></tr>
<tr class="memdesc:ga0f06d321e00e3963aa0d672ab0d06fe5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Removes the PID file created by <a class="el" href="group__start__stop.html#ga855a2fced34e4dfaaea9cb6a2bc7fc07" title="Makes a PID file RC_PID_FILE (/run/shm/robotcontrol.pid) containing the current PID of your process...">rc_make_pid_file()</a>.  <a href="#ga0f06d321e00e3963aa0d672ab0d06fe5">More...</a><br /></td></tr>
<tr class="separator:ga0f06d321e00e3963aa0d672ab0d06fe5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaafc5000de8ff00ed83848ef29981ffc9"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__start__stop.html#gaafc5000de8ff00ed83848ef29981ffc9">rc_enable_signal_handler</a> (void)</td></tr>
<tr class="memdesc:gaafc5000de8ff00ed83848ef29981ffc9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enables a generic signal handler. Optional but recommended.  <a href="#gaafc5000de8ff00ed83848ef29981ffc9">More...</a><br /></td></tr>
<tr class="separator:gaafc5000de8ff00ed83848ef29981ffc9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab4f9f1be589ce6820d2a067c13a5d72d"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__start__stop.html#gab4f9f1be589ce6820d2a067c13a5d72d">rc_disable_signal_handler</a> (void)</td></tr>
<tr class="memdesc:gab4f9f1be589ce6820d2a067c13a5d72d"><td class="mdescLeft">&#160;</td><td class="mdescRight">resets the system signal callbacks to defualt, generally this is never needed unless you are intentionally changing signal handlers in the middle of a program.  <a href="#gab4f9f1be589ce6820d2a067c13a5d72d">More...</a><br /></td></tr>
<tr class="separator:gab4f9f1be589ce6820d2a067c13a5d72d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="gabf72a3607c241faf7f4b9094253af7a1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gabf72a3607c241faf7f4b9094253af7a1">&#9670;&nbsp;</a></span>RC_PID_DIR</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RC_PID_DIR&#160;&#160;&#160;&quot;/run/shm/&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ga1717e01e4309df6c7c93a48084f5ffb9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga1717e01e4309df6c7c93a48084f5ffb9">&#9670;&nbsp;</a></span>RC_PID_FILE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RC_PID_FILE&#160;&#160;&#160;&quot;/run/shm/robotcontrol.pid&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="gac4ff093ea579df8514825b1e601d38f9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gac4ff093ea579df8514825b1e601d38f9">&#9670;&nbsp;</a></span>rc_state_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="group__start__stop.html#gac4ff093ea579df8514825b1e601d38f9">rc_state_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>process state variable, read and modify by rc_get_state, rc_set_state, and rc_print_state. Starts as UNINITIALIZED. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="ggac4ff093ea579df8514825b1e601d38f9af096820742c38363e9d6c33e7c932780"></a>UNINITIALIZED&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="ggac4ff093ea579df8514825b1e601d38f9a1061be6c3fb88d32829cba6f6b2be304"></a>RUNNING&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="ggac4ff093ea579df8514825b1e601d38f9ad4bb05915de3c370d3a33d4f51389655"></a>PAUSED&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="ggac4ff093ea579df8514825b1e601d38f9acfb2a43c3a1dfa5961655a52e11c5d73"></a>EXITING&#160;</td><td class="fielddoc"></td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga08307c9805692eb084112cbcae4b744f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga08307c9805692eb084112cbcae4b744f">&#9670;&nbsp;</a></span>rc_get_state()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__start__stop.html#gac4ff093ea579df8514825b1e601d38f9">rc_state_t</a> rc_get_state </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>fetches the current process state as set by the user or signal handler </p>
<dl class="section return"><dt>Returns</dt><dd>current process state </dd></dl>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="rc_balance_8c-example.html#a34">rc_balance.c</a>, <a class="el" href="rc_blink_8c-example.html#a0">rc_blink.c</a>, and <a class="el" href="rc_check_battery_8c-example.html#a2">rc_check_battery.c</a>.</dd>
</dl>
</div>
</div>
<a id="ga693e5b9f051bb14507d1d9eb246f616e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga693e5b9f051bb14507d1d9eb246f616e">&#9670;&nbsp;</a></span>rc_set_state()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void rc_set_state </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__start__stop.html#gac4ff093ea579df8514825b1e601d38f9">rc_state_t</a>&#160;</td>
          <td class="paramname"><em>new_state</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>sets the current process state. </p>
<p>Except for the signal handler setting the state to EXITING, this is the only way that the process state can be changed.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">new_state</td><td>The new state </td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="rc_balance_8c-example.html#a40">rc_balance.c</a>, and <a class="el" href="rc_blink_8c-example.html#a2">rc_blink.c</a>.</dd>
</dl>
</div>
</div>
<a id="ga82b35235986818b68c56251fbd6ad27b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga82b35235986818b68c56251fbd6ad27b">&#9670;&nbsp;</a></span>rc_print_state()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rc_print_state </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>prints the process state to stdout in human-readble form </p>
<dl class="section return"><dt>Returns</dt><dd>0 on success, -1 on failure </dd></dl>

</div>
</div>
<a id="ga855a2fced34e4dfaaea9cb6a2bc7fc07"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga855a2fced34e4dfaaea9cb6a2bc7fc07">&#9670;&nbsp;</a></span>rc_make_pid_file()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rc_make_pid_file </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Makes a PID file RC_PID_FILE (/run/shm/robotcontrol.pid) containing the current PID of your process. </p>
<dl class="section return"><dt>Returns</dt><dd>Returns 0 if successful. If that file already exists then it is not touched and this function returns 1 at which point we suggest you run rc_kill_exising_process() to kill that process. Returns -1 if there is some other problem writing to the file. </dd></dl>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="rc_balance_8c-example.html#a16">rc_balance.c</a>, and <a class="el" href="rc_blink_8c-example.html#a19">rc_blink.c</a>.</dd>
</dl>
</div>
</div>
<a id="gac636ff375209b0261865875e168af8f6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gac636ff375209b0261865875e168af8f6">&#9670;&nbsp;</a></span>rc_kill_existing_process()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rc_kill_existing_process </td>
          <td>(</td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>timeout_s</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function is used to make sure any existing program using the PID file is stopped. </p>
<p>The user doesn't need to integrate this in their own program However, the user may call the rc_kill example program from the command line to close whatever program is running in the background.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">timeout_s</td><td>timeout period to wait for process to close cleanly, must be &gt;=0.1</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>return values:<ul>
<li>-4: invalid argument or other error</li>
<li>-3: insufficient privileges to kill existing process</li>
<li>-2: unreadable or invalid contents in RC_PID_FILE</li>
<li>-1: existing process failed to close cleanly and had to be killed</li>
<li>0: No existing process was running</li>
<li>1: An existing process was running but it shut down cleanly. </li>
</ul>
</dd></dl>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="rc_balance_8c-example.html#a3">rc_balance.c</a>, <a class="el" href="rc_blink_8c-example.html#a9">rc_blink.c</a>, and <a class="el" href="rc_kill_8c-example.html#a0">rc_kill.c</a>.</dd>
</dl>
</div>
</div>
<a id="ga0f06d321e00e3963aa0d672ab0d06fe5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga0f06d321e00e3963aa0d672ab0d06fe5">&#9670;&nbsp;</a></span>rc_remove_pid_file()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rc_remove_pid_file </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Removes the PID file created by <a class="el" href="group__start__stop.html#ga855a2fced34e4dfaaea9cb6a2bc7fc07" title="Makes a PID file RC_PID_FILE (/run/shm/robotcontrol.pid) containing the current PID of your process...">rc_make_pid_file()</a>. </p>
<p>This should be called before your program closes to make sure it's not left behind.</p>
<dl class="section return"><dt>Returns</dt><dd>Returns 0 whether or not the file was actually there. Returns -1 if there was a file system error. </dd></dl>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="rc_balance_8c-example.html#a48">rc_balance.c</a>, and <a class="el" href="rc_blink_8c-example.html#a22">rc_blink.c</a>.</dd>
</dl>
</div>
</div>
<a id="gaafc5000de8ff00ed83848ef29981ffc9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaafc5000de8ff00ed83848ef29981ffc9">&#9670;&nbsp;</a></span>rc_enable_signal_handler()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rc_enable_signal_handler </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Enables a generic signal handler. Optional but recommended. </p>
<p>This catches SIGINT, SIGTERM, SIGHUP, and SIGSEGV and does the following:</p>
<ul>
<li>SIGINT (ctrl-c) Sets process state to EXITING indicating to the user threads to shut down cleanly. All user threads should check rc_get_state to catch this.</li>
<li>SITERM: Same as SIGINT above</li>
<li>SIGHUP: Ignored to prevent process from stopping due to loose USB network connection. Also allows robot control programs to keep running after USB cable in intentionally removed.</li>
<li>SIGSEGV: Segfaults will be caught and print some debugging info to the screen before setting rc_state to EXITING. Behavior with segfaults is no guaranteed to be predictable.</li>
</ul>
<dl class="section return"><dt>Returns</dt><dd>Returns 0 on success or -1 on error </dd></dl>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="rc_balance_8c-example.html#a4">rc_balance.c</a>, <a class="el" href="rc_blink_8c-example.html#a10">rc_blink.c</a>, and <a class="el" href="rc_check_battery_8c-example.html#a0">rc_check_battery.c</a>.</dd>
</dl>
</div>
</div>
<a id="gab4f9f1be589ce6820d2a067c13a5d72d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gab4f9f1be589ce6820d2a067c13a5d72d">&#9670;&nbsp;</a></span>rc_disable_signal_handler()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rc_disable_signal_handler </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>resets the system signal callbacks to defualt, generally this is never needed unless you are intentionally changing signal handlers in the middle of a program. </p>
<dl class="section return"><dt>Returns</dt><dd>Returns 0 on success or -1 on error </dd></dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.13-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
