<!-- HTML header for doxygen 1.8.13-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Robot Control Library: SPI</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<link rel="search" href="search_opensearch.php?v=opensearch.xml" type="application/opensearchdescription+xml" title="Robot Control Library"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="customdoxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Robot Control Library
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,true,'search.php','Search');
  $(document).ready(function() {
    if ($('.searchresults').length > 0) { searchBox.DOMSearchField().focus(); }
  });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group___s_p_i.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">SPI<div class="ingroups"><a class="el" href="group___i_o.html">IO</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<a name="details" id="details"></a><h2 class="groupheader">Description</h2>
<p>General purpose C interface to the Linux SPI driver. </p>
<p>&lt;<a class="el" href="spi_8h.html">rc/spi.h</a>&gt;</p>
<p>It allows use of both dedicated hardware slave-select pins as well as GPIO pins for slave select. While this was developed on the BeagleBone platform, it should also work on Raspberry Pi and other embedded Linux systems.</p>
<p>For the Robotics Cape and BeagleBone blue, the SPI bus 1 is broken out on two JST SH 6-pin sockets labeled SPI1.1 and SPI1.2 These share clock and serial IO signals, but have independent slave select lines so two devices can share the same bus. Note that these ports labeled for slaves 1 and 2 correspond to slaves 0 and 1 in software. To make source code more clear, the macros RC_BB_SPI1_SS1 and RC_BB_SPI1_SS2 are provided in this header which are defined as 1,0 and 1,1. the GPIO channels corresponding to these slave select pins are also provided as macros in this header.For example:</p>
<div class="fragment"><div class="line"><a class="code" href="group___s_p_i.html#ga5696955033457ffaa734170468893835">rc_spi_init_manual_slave</a>(<a class="code" href="group___s_p_i.html#ga7449e345bf0e406de395e00409aefa60">RC_BB_SPI1_SS1</a>, SPI_MODE_0, \</div><div class="line">                         <a class="code" href="group___s_p_i.html#ga02d8e63bbc1fdc32659c570124b0bc32">RC_SPI_MAX_SPEED</a>, <a class="code" href="group___s_p_i.html#ga8e6fd8878e0ffeb200ff6b284f667408">RC_BLUE_SS1_GPIO</a>);</div></div><!-- fragment --><p>pinout on Robotics Cape and BeagleBone Blue:</p><ol type="1">
<li>GND</li>
<li>3.3V</li>
<li>MOSI (P9_30)</li>
<li>MISO (P9_29)</li>
<li>SCK (P9_31)</li>
<li>Slave Select</li>
</ol>
<p>The slaves can be selected automatically by the SPI Linux driver or manually with rc_spi_select() function. On the Robotics Cape, slave 1 can be used in either mode, but slave 2 must be selected manually. On the BB Blue either slave can be used in manual or automatic modes. Only initialize once with either mode.</p>
<dl class="section author"><dt>Author</dt><dd>James Strawson </dd></dl>
<dl class="section date"><dt>Date</dt><dd>1/19/2018 </dd></dl>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ga02d8e63bbc1fdc32659c570124b0bc32"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___s_p_i.html#ga02d8e63bbc1fdc32659c570124b0bc32">RC_SPI_MAX_SPEED</a>&#160;&#160;&#160;24000000</td></tr>
<tr class="memdesc:ga02d8e63bbc1fdc32659c570124b0bc32"><td class="mdescLeft">&#160;</td><td class="mdescRight">24mhz  <a href="#ga02d8e63bbc1fdc32659c570124b0bc32">More...</a><br /></td></tr>
<tr class="separator:ga02d8e63bbc1fdc32659c570124b0bc32"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga48151cf037500b4e44aa38290c1e433d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___s_p_i.html#ga48151cf037500b4e44aa38290c1e433d">RC_SPI_MIN_SPEED</a>&#160;&#160;&#160;1000</td></tr>
<tr class="memdesc:ga48151cf037500b4e44aa38290c1e433d"><td class="mdescLeft">&#160;</td><td class="mdescRight">1khz  <a href="#ga48151cf037500b4e44aa38290c1e433d">More...</a><br /></td></tr>
<tr class="separator:ga48151cf037500b4e44aa38290c1e433d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad7d52effae6be8581575cb70888bb411"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___s_p_i.html#gad7d52effae6be8581575cb70888bb411">RC_SPI_BITS_PER_WORD</a>&#160;&#160;&#160;8</td></tr>
<tr class="memdesc:gad7d52effae6be8581575cb70888bb411"><td class="mdescLeft">&#160;</td><td class="mdescRight">only allow for 8-bit words  <a href="#gad7d52effae6be8581575cb70888bb411">More...</a><br /></td></tr>
<tr class="separator:gad7d52effae6be8581575cb70888bb411"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga7449e345bf0e406de395e00409aefa60"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___s_p_i.html#ga7449e345bf0e406de395e00409aefa60">RC_BB_SPI1_SS1</a>&#160;&#160;&#160;1,0</td></tr>
<tr class="memdesc:ga7449e345bf0e406de395e00409aefa60"><td class="mdescLeft">&#160;</td><td class="mdescRight">bus and slave to use for Robotics Cape and BeagleBone Blue SPI1.1 port  <a href="#ga7449e345bf0e406de395e00409aefa60">More...</a><br /></td></tr>
<tr class="separator:ga7449e345bf0e406de395e00409aefa60"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaeb78a6fe5496819d7b74e5c478f25129"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___s_p_i.html#gaeb78a6fe5496819d7b74e5c478f25129">RC_BB_SPI1_SS2</a>&#160;&#160;&#160;1,1</td></tr>
<tr class="memdesc:gaeb78a6fe5496819d7b74e5c478f25129"><td class="mdescLeft">&#160;</td><td class="mdescRight">bus and slave to use for Robotics Cape and BeagleBone Blue SPI1.2 port  <a href="#gaeb78a6fe5496819d7b74e5c478f25129">More...</a><br /></td></tr>
<tr class="separator:gaeb78a6fe5496819d7b74e5c478f25129"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gabfec138c2dc754642a6e05c5c468b152"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___s_p_i.html#gabfec138c2dc754642a6e05c5c468b152">RC_CAPE_SS1_GPIO</a>&#160;&#160;&#160;3,17</td></tr>
<tr class="memdesc:gabfec138c2dc754642a6e05c5c468b152"><td class="mdescLeft">&#160;</td><td class="mdescRight">Robotics Cape SPI1 SS1 gpio P9_28, normally AUTO mode.  <a href="#gabfec138c2dc754642a6e05c5c468b152">More...</a><br /></td></tr>
<tr class="separator:gabfec138c2dc754642a6e05c5c468b152"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4d3357c8bd04873f944954c6889b78c3"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___s_p_i.html#ga4d3357c8bd04873f944954c6889b78c3">RC_CAPE_SS2_GPIO</a>&#160;&#160;&#160;1,17</td></tr>
<tr class="memdesc:ga4d3357c8bd04873f944954c6889b78c3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Robotics Cape SPI1 SS2 gpio P9_23, normally MANUAL GPIO mode.  <a href="#ga4d3357c8bd04873f944954c6889b78c3">More...</a><br /></td></tr>
<tr class="separator:ga4d3357c8bd04873f944954c6889b78c3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8e6fd8878e0ffeb200ff6b284f667408"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___s_p_i.html#ga8e6fd8878e0ffeb200ff6b284f667408">RC_BLUE_SS1_GPIO</a>&#160;&#160;&#160;0,29</td></tr>
<tr class="memdesc:ga8e6fd8878e0ffeb200ff6b284f667408"><td class="mdescLeft">&#160;</td><td class="mdescRight">BeagleBone Blue SPI1 SS1 gpio 0_29 pin H18.  <a href="#ga8e6fd8878e0ffeb200ff6b284f667408">More...</a><br /></td></tr>
<tr class="separator:ga8e6fd8878e0ffeb200ff6b284f667408"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6e8439d473e02b4fc3d08c439cd91f9b"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___s_p_i.html#ga6e8439d473e02b4fc3d08c439cd91f9b">RC_BLUE_SS2_GPIO</a>&#160;&#160;&#160;0,7</td></tr>
<tr class="memdesc:ga6e8439d473e02b4fc3d08c439cd91f9b"><td class="mdescLeft">&#160;</td><td class="mdescRight">BeagleBone Blue SPI1 SS2 gpio 0_7 pin H18.  <a href="#ga6e8439d473e02b4fc3d08c439cd91f9b">More...</a><br /></td></tr>
<tr class="separator:ga6e8439d473e02b4fc3d08c439cd91f9b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga01facb1d65f98568feacb6175b68e1b5"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___s_p_i.html#ga01facb1d65f98568feacb6175b68e1b5">rc_spi_init_auto_slave</a> (int bus, int slave, int bus_mode, int speed_hz)</td></tr>
<tr class="memdesc:ga01facb1d65f98568feacb6175b68e1b5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes an SPI bus.  <a href="#ga01facb1d65f98568feacb6175b68e1b5">More...</a><br /></td></tr>
<tr class="separator:ga01facb1d65f98568feacb6175b68e1b5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5696955033457ffaa734170468893835"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___s_p_i.html#ga5696955033457ffaa734170468893835">rc_spi_init_manual_slave</a> (int bus, int slave, int bus_mode, int speed_hz, int chip, int pin)</td></tr>
<tr class="memdesc:ga5696955033457ffaa734170468893835"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes an SPI bus and GPIO pin for use as a manual SPI slave select pin.  <a href="#ga5696955033457ffaa734170468893835">More...</a><br /></td></tr>
<tr class="separator:ga5696955033457ffaa734170468893835"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga58fa9de20b3fa7894bbf45629b007180"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___s_p_i.html#ga58fa9de20b3fa7894bbf45629b007180">rc_spi_get_fd</a> (int bus, int slave)</td></tr>
<tr class="memdesc:ga58fa9de20b3fa7894bbf45629b007180"><td class="mdescLeft">&#160;</td><td class="mdescRight">fetches the file descriptor for a specified slave so the user can do more advanced IO operations than what's presented here  <a href="#ga58fa9de20b3fa7894bbf45629b007180">More...</a><br /></td></tr>
<tr class="separator:ga58fa9de20b3fa7894bbf45629b007180"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga45a54cb26f96590a895a95648aae7318"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___s_p_i.html#ga45a54cb26f96590a895a95648aae7318">rc_spi_close</a> (int bus)</td></tr>
<tr class="memdesc:ga45a54cb26f96590a895a95648aae7318"><td class="mdescLeft">&#160;</td><td class="mdescRight">Closes and cleans up the bus for specified slave.  <a href="#ga45a54cb26f96590a895a95648aae7318">More...</a><br /></td></tr>
<tr class="separator:ga45a54cb26f96590a895a95648aae7318"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf99da1c0fc5da1ae1555dba2ed90bf62"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___s_p_i.html#gaf99da1c0fc5da1ae1555dba2ed90bf62">rc_spi_manual_select</a> (int bus, int slave, int select)</td></tr>
<tr class="memdesc:gaf99da1c0fc5da1ae1555dba2ed90bf62"><td class="mdescLeft">&#160;</td><td class="mdescRight">Manually selects or deselects a slave.  <a href="#gaf99da1c0fc5da1ae1555dba2ed90bf62">More...</a><br /></td></tr>
<tr class="separator:gaf99da1c0fc5da1ae1555dba2ed90bf62"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad113f7b75a8b6f4bee912ed83b400b49"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___s_p_i.html#gad113f7b75a8b6f4bee912ed83b400b49">rc_spi_transfer</a> (int bus, int slave, uint8_t *tx_data, size_t tx_bytes, uint8_t *rx_data)</td></tr>
<tr class="memdesc:gad113f7b75a8b6f4bee912ed83b400b49"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send any sequence of bytes and read the response.  <a href="#gad113f7b75a8b6f4bee912ed83b400b49">More...</a><br /></td></tr>
<tr class="separator:gad113f7b75a8b6f4bee912ed83b400b49"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad5fc840c000c6cd57321af90efb60fa2"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___s_p_i.html#gad5fc840c000c6cd57321af90efb60fa2">rc_spi_write</a> (int bus, int slave, uint8_t *data, size_t bytes)</td></tr>
<tr class="memdesc:gad5fc840c000c6cd57321af90efb60fa2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Writes data to specified slave.  <a href="#gad5fc840c000c6cd57321af90efb60fa2">More...</a><br /></td></tr>
<tr class="separator:gad5fc840c000c6cd57321af90efb60fa2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4977a424108cf6f6f69f33dac358ad87"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___s_p_i.html#ga4977a424108cf6f6f69f33dac358ad87">rc_spi_read</a> (int bus, int slave, uint8_t *data, size_t bytes)</td></tr>
<tr class="memdesc:ga4977a424108cf6f6f69f33dac358ad87"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reads data from a specified slave.  <a href="#ga4977a424108cf6f6f69f33dac358ad87">More...</a><br /></td></tr>
<tr class="separator:ga4977a424108cf6f6f69f33dac358ad87"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="ga02d8e63bbc1fdc32659c570124b0bc32"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga02d8e63bbc1fdc32659c570124b0bc32">&#9670;&nbsp;</a></span>RC_SPI_MAX_SPEED</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RC_SPI_MAX_SPEED&#160;&#160;&#160;24000000</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>24mhz </p>

</div>
</div>
<a id="ga48151cf037500b4e44aa38290c1e433d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga48151cf037500b4e44aa38290c1e433d">&#9670;&nbsp;</a></span>RC_SPI_MIN_SPEED</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RC_SPI_MIN_SPEED&#160;&#160;&#160;1000</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>1khz </p>

</div>
</div>
<a id="gad7d52effae6be8581575cb70888bb411"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gad7d52effae6be8581575cb70888bb411">&#9670;&nbsp;</a></span>RC_SPI_BITS_PER_WORD</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RC_SPI_BITS_PER_WORD&#160;&#160;&#160;8</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>only allow for 8-bit words </p>

</div>
</div>
<a id="ga7449e345bf0e406de395e00409aefa60"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga7449e345bf0e406de395e00409aefa60">&#9670;&nbsp;</a></span>RC_BB_SPI1_SS1</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RC_BB_SPI1_SS1&#160;&#160;&#160;1,0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>bus and slave to use for Robotics Cape and BeagleBone Blue SPI1.1 port </p>

</div>
</div>
<a id="gaeb78a6fe5496819d7b74e5c478f25129"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaeb78a6fe5496819d7b74e5c478f25129">&#9670;&nbsp;</a></span>RC_BB_SPI1_SS2</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RC_BB_SPI1_SS2&#160;&#160;&#160;1,1</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>bus and slave to use for Robotics Cape and BeagleBone Blue SPI1.2 port </p>

</div>
</div>
<a id="gabfec138c2dc754642a6e05c5c468b152"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gabfec138c2dc754642a6e05c5c468b152">&#9670;&nbsp;</a></span>RC_CAPE_SS1_GPIO</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RC_CAPE_SS1_GPIO&#160;&#160;&#160;3,17</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Robotics Cape SPI1 SS1 gpio P9_28, normally AUTO mode. </p>

</div>
</div>
<a id="ga4d3357c8bd04873f944954c6889b78c3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga4d3357c8bd04873f944954c6889b78c3">&#9670;&nbsp;</a></span>RC_CAPE_SS2_GPIO</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RC_CAPE_SS2_GPIO&#160;&#160;&#160;1,17</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Robotics Cape SPI1 SS2 gpio P9_23, normally MANUAL GPIO mode. </p>

</div>
</div>
<a id="ga8e6fd8878e0ffeb200ff6b284f667408"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga8e6fd8878e0ffeb200ff6b284f667408">&#9670;&nbsp;</a></span>RC_BLUE_SS1_GPIO</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RC_BLUE_SS1_GPIO&#160;&#160;&#160;0,29</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>BeagleBone Blue SPI1 SS1 gpio 0_29 pin H18. </p>

</div>
</div>
<a id="ga6e8439d473e02b4fc3d08c439cd91f9b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga6e8439d473e02b4fc3d08c439cd91f9b">&#9670;&nbsp;</a></span>RC_BLUE_SS2_GPIO</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RC_BLUE_SS2_GPIO&#160;&#160;&#160;0,7</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>BeagleBone Blue SPI1 SS2 gpio 0_7 pin H18. </p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga01facb1d65f98568feacb6175b68e1b5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga01facb1d65f98568feacb6175b68e1b5">&#9670;&nbsp;</a></span>rc_spi_init_auto_slave()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rc_spi_init_auto_slave </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>bus</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>slave</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>bus_mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>speed_hz</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes an SPI bus. </p>
<p>For description of the 4 SPI modes, see <a href="https://en.wikipedia.org/wiki/Serial_Peripheral_Interface_Bus#Mode_numbers">https://en.wikipedia.org/wiki/Serial_Peripheral_Interface_Bus#Mode_numbers</a></p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">bus</td><td>The bus </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">slave</td><td>The slave </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">bus_mode</td><td>SPI_MODE_0, SPI_MODE_1, SPI_MODE_2, or SPI_MODE_3 </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">speed_hz</td><td>The speed hz</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on succcess or -1 on failure </dd></dl>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="rc_spi_loopback_8c-example.html#a0">rc_spi_loopback.c</a>.</dd>
</dl>
</div>
</div>
<a id="ga5696955033457ffaa734170468893835"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga5696955033457ffaa734170468893835">&#9670;&nbsp;</a></span>rc_spi_init_manual_slave()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rc_spi_init_manual_slave </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>bus</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>slave</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>bus_mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>speed_hz</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>chip</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>pin</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes an SPI bus and GPIO pin for use as a manual SPI slave select pin. </p>
<p>The provided gpio chip/pin will then be remembered and tied to the provided slave number and bus. Note that on the BeagleBone and probably other platforms, there are only two files provided by the driver for interfacing to the bus, /dev/spi1.0 and /dev/spi1.1. When using a slave in manual mode, the first interface (slave 0 in software) will be used to talk to the manual slaves. Therefore this slave can not be used as an automatic slave.</p>
<p>For the BeagleBone Blue and RoboticsCape, this will also ensure that the pinmux is set correctly for that pin. The available manual slave select pins for these two boards are defined in this header for convenience. If using other boards it's up to the user to make sure the pin they are using is set up correctly in the device tree.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">bus</td><td>The spi bus </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">slave</td><td>The slave identifier (up to 16) </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">bus_mode</td><td>The bus mode </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">speed_hz</td><td>The speed hz </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">chip</td><td>The gpio chip </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">pin</td><td>The gpio pin</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on succcess or -1 on failure </dd></dl>

</div>
</div>
<a id="ga58fa9de20b3fa7894bbf45629b007180"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga58fa9de20b3fa7894bbf45629b007180">&#9670;&nbsp;</a></span>rc_spi_get_fd()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rc_spi_get_fd </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>bus</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>slave</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>fetches the file descriptor for a specified slave so the user can do more advanced IO operations than what's presented here </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">bus</td><td>The bus </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">slave</td><td>0 or 1</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>fd or -1 on failure </dd></dl>

</div>
</div>
<a id="ga45a54cb26f96590a895a95648aae7318"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga45a54cb26f96590a895a95648aae7318">&#9670;&nbsp;</a></span>rc_spi_close()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rc_spi_close </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>bus</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Closes and cleans up the bus for specified slave. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">bus</td><td>SPI bus to close</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on succcess or -1 on failure </dd></dl>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="rc_spi_loopback_8c-example.html#a2">rc_spi_loopback.c</a>.</dd>
</dl>
</div>
</div>
<a id="gaf99da1c0fc5da1ae1555dba2ed90bf62"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaf99da1c0fc5da1ae1555dba2ed90bf62">&#9670;&nbsp;</a></span>rc_spi_manual_select()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rc_spi_manual_select </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>bus</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>slave</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>select</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Manually selects or deselects a slave. </p>
<p>Only works if slave was initialized with SPI_SLAVE_MODE_MANUAL. If SPI_SLAVE_MODE_AUTO was selected then the SPI driver will handle this automatically when reading or writing.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">bus</td><td>SPI bus to use </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">slave</td><td>slave id </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">select</td><td>0 to deselect, otherwise selects</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on succcess or -1 on failure </dd></dl>

</div>
</div>
<a id="gad113f7b75a8b6f4bee912ed83b400b49"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gad113f7b75a8b6f4bee912ed83b400b49">&#9670;&nbsp;</a></span>rc_spi_transfer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rc_spi_transfer </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>bus</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>slave</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>tx_data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>tx_bytes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>rx_data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Send any sequence of bytes and read the response. </p>
<p>This is a wrapper for the ioctl spi transfer function and is generally what you will use for reading/writing device registers.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">bus</td><td>SPI bus to use </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">slave</td><td>slave id </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">tx_data</td><td>pointer to data to send </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">tx_bytes</td><td>number of bytes to send </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">rx_data</td><td>pointer to put response data</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>number of bytes received or -1 on failure </dd></dl>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="rc_spi_loopback_8c-example.html#a1">rc_spi_loopback.c</a>.</dd>
</dl>
</div>
</div>
<a id="gad5fc840c000c6cd57321af90efb60fa2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gad5fc840c000c6cd57321af90efb60fa2">&#9670;&nbsp;</a></span>rc_spi_write()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rc_spi_write </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>bus</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>slave</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>bytes</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Writes data to specified slave. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">bus</td><td>SPI bus to use </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">slave</td><td>slave id </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">data</td><td>data pointer </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">bytes</td><td>number of bytes to send</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>returns number of bytes written or -1 on failure </dd></dl>

</div>
</div>
<a id="ga4977a424108cf6f6f69f33dac358ad87"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga4977a424108cf6f6f69f33dac358ad87">&#9670;&nbsp;</a></span>rc_spi_read()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rc_spi_read </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>bus</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>slave</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>bytes</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reads data from a specified slave. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">bus</td><td>SPI bus to use </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">slave</td><td>slave id </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">data</td><td>data poitner </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">bytes</td><td>number of bytes to read</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>number of bytes read or -1 on failure </dd></dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.13-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
