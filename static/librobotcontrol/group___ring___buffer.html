<!-- HTML header for doxygen 1.8.13-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Robot Control Library: Ring_Buffer</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<link rel="search" href="search_opensearch.php?v=opensearch.xml" type="application/opensearchdescription+xml" title="Robot Control Library"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="customdoxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Robot Control Library
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,true,'search.php','Search');
  $(document).ready(function() {
    if ($('.searchresults').length > 0) { searchBox.DOMSearchField().focus(); }
  });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group___ring___buffer.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Ring_Buffer<div class="ingroups"><a class="el" href="group___math.html">Math</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<a name="details" id="details"></a><h2 class="groupheader">Description</h2>
<p>ring buffer implementation for double-precision floats </p>
<p>&lt;<a class="el" href="ring__buffer_8h.html">rc/math/ring_buffer.h</a>&gt;</p>
<p>Ring buffers are FIFO (first in first out) buffers of fixed length which efficiently boot out the oldest value when full. They are particularly well suited for storing the last n values in a discrete time filter.</p>
<p>The user creates their own instance of a buffer and passes a pointer to the these ring_buf functions to perform normal operations.</p>
<dl class="section author"><dt>Author</dt><dd>James Strawson </dd></dl>
<dl class="section date"><dt>Date</dt><dd>2016 </dd></dl>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structrc__ringbuf__t.html">rc_ringbuf_t</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Struct containing state of a ringbuffer and pointer to dynamically allocated memory.  <a href="structrc__ringbuf__t.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ga57868cd0e7c34de812f7c394ef4c1429"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___ring___buffer.html#ga57868cd0e7c34de812f7c394ef4c1429">RC_RINGBUF_INITIALIZER</a></td></tr>
<tr class="separator:ga57868cd0e7c34de812f7c394ef4c1429"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:gaffc2f47a5af64e67792773720eb9b978"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="structrc__ringbuf__t.html">rc_ringbuf_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___ring___buffer.html#gaffc2f47a5af64e67792773720eb9b978">rc_ringbuf_t</a></td></tr>
<tr class="memdesc:gaffc2f47a5af64e67792773720eb9b978"><td class="mdescLeft">&#160;</td><td class="mdescRight">Struct containing state of a ringbuffer and pointer to dynamically allocated memory.  <a href="#gaffc2f47a5af64e67792773720eb9b978">More...</a><br /></td></tr>
<tr class="separator:gaffc2f47a5af64e67792773720eb9b978"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga18cecd9dd70482175791871b0ed7d833"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structrc__ringbuf__t.html">rc_ringbuf_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___ring___buffer.html#ga18cecd9dd70482175791871b0ed7d833">rc_ringbuf_empty</a> (void)</td></tr>
<tr class="memdesc:ga18cecd9dd70482175791871b0ed7d833"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns an <a class="el" href="structrc__ringbuf__t.html" title="Struct containing state of a ringbuffer and pointer to dynamically allocated memory. ">rc_ringbuf_t</a> struct which is completely zero'd out with no memory allocated for it.  <a href="#ga18cecd9dd70482175791871b0ed7d833">More...</a><br /></td></tr>
<tr class="separator:ga18cecd9dd70482175791871b0ed7d833"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga081c474a7a3e607a73080f5b7d6de94c"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___ring___buffer.html#ga081c474a7a3e607a73080f5b7d6de94c">rc_ringbuf_alloc</a> (<a class="el" href="structrc__ringbuf__t.html">rc_ringbuf_t</a> *buf, int size)</td></tr>
<tr class="memdesc:ga081c474a7a3e607a73080f5b7d6de94c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Allocates memory for a ring buffer and initializes an <a class="el" href="structrc__ringbuf__t.html" title="Struct containing state of a ringbuffer and pointer to dynamically allocated memory. ">rc_ringbuf_t</a> struct.  <a href="#ga081c474a7a3e607a73080f5b7d6de94c">More...</a><br /></td></tr>
<tr class="separator:ga081c474a7a3e607a73080f5b7d6de94c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gacc048f71fcf6c35008c4a42a4c646d79"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___ring___buffer.html#gacc048f71fcf6c35008c4a42a4c646d79">rc_ringbuf_free</a> (<a class="el" href="structrc__ringbuf__t.html">rc_ringbuf_t</a> *buf)</td></tr>
<tr class="memdesc:gacc048f71fcf6c35008c4a42a4c646d79"><td class="mdescLeft">&#160;</td><td class="mdescRight">Frees the memory allocated for buffer buf.  <a href="#gacc048f71fcf6c35008c4a42a4c646d79">More...</a><br /></td></tr>
<tr class="separator:gacc048f71fcf6c35008c4a42a4c646d79"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa9da5cc641aed10a6212df49f72669c3"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___ring___buffer.html#gaa9da5cc641aed10a6212df49f72669c3">rc_ringbuf_reset</a> (<a class="el" href="structrc__ringbuf__t.html">rc_ringbuf_t</a> *buf)</td></tr>
<tr class="memdesc:gaa9da5cc641aed10a6212df49f72669c3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets all values in the buffer to 0.0f and sets the buffer index back to 0.  <a href="#gaa9da5cc641aed10a6212df49f72669c3">More...</a><br /></td></tr>
<tr class="separator:gaa9da5cc641aed10a6212df49f72669c3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa82925c4c7ea0996b4861c89c131afb3"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___ring___buffer.html#gaa82925c4c7ea0996b4861c89c131afb3">rc_ringbuf_insert</a> (<a class="el" href="structrc__ringbuf__t.html">rc_ringbuf_t</a> *buf, double val)</td></tr>
<tr class="memdesc:gaa82925c4c7ea0996b4861c89c131afb3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Puts a new float into the ring buffer and updates the index accordingly.  <a href="#gaa82925c4c7ea0996b4861c89c131afb3">More...</a><br /></td></tr>
<tr class="separator:gaa82925c4c7ea0996b4861c89c131afb3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga178409422c694dab381ab6fd51918801"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___ring___buffer.html#ga178409422c694dab381ab6fd51918801">rc_ringbuf_get_value</a> (<a class="el" href="structrc__ringbuf__t.html">rc_ringbuf_t</a> *buf, int position)</td></tr>
<tr class="memdesc:ga178409422c694dab381ab6fd51918801"><td class="mdescLeft">&#160;</td><td class="mdescRight">Fetches the float which is 'position' steps behind the last value added to the buffer.  <a href="#ga178409422c694dab381ab6fd51918801">More...</a><br /></td></tr>
<tr class="separator:ga178409422c694dab381ab6fd51918801"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0c8d29b891fc18f77dac6cdd6dbe1e24"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___ring___buffer.html#ga0c8d29b891fc18f77dac6cdd6dbe1e24">rc_ringbuf_std_dev</a> (<a class="el" href="structrc__ringbuf__t.html">rc_ringbuf_t</a> buf)</td></tr>
<tr class="memdesc:ga0c8d29b891fc18f77dac6cdd6dbe1e24"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the standard deviation of all values in the ring buffer.  <a href="#ga0c8d29b891fc18f77dac6cdd6dbe1e24">More...</a><br /></td></tr>
<tr class="separator:ga0c8d29b891fc18f77dac6cdd6dbe1e24"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="ga57868cd0e7c34de812f7c394ef4c1429"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga57868cd0e7c34de812f7c394ef4c1429">&#9670;&nbsp;</a></span>RC_RINGBUF_INITIALIZER</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RC_RINGBUF_INITIALIZER</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">{\</div><div class="line">        .d = NULL,\</div><div class="line">        .size = 0,\</div><div class="line">        .index = 0,\</div><div class="line">        .initialized = 0}</div></div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga18cecd9dd70482175791871b0ed7d833"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga18cecd9dd70482175791871b0ed7d833">&#9670;&nbsp;</a></span>rc_ringbuf_empty()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structrc__ringbuf__t.html">rc_ringbuf_t</a> rc_ringbuf_empty </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns an <a class="el" href="structrc__ringbuf__t.html" title="Struct containing state of a ringbuffer and pointer to dynamically allocated memory. ">rc_ringbuf_t</a> struct which is completely zero'd out with no memory allocated for it. </p>
<p>This is essential for declaring new ring buffers since structs declared inside of functions are not necessarily zero'd out which can cause the struct to contain problematic contents leading to segfaults. New ring buffers should be initialized with this before calling rc_ringbuf_alloc.</p>
<dl class="section return"><dt>Returns</dt><dd>empty and ready-to-allocate <a class="el" href="structrc__ringbuf__t.html" title="Struct containing state of a ringbuffer and pointer to dynamically allocated memory. ">rc_ringbuf_t</a> </dd></dl>

</div>
</div>
<a id="ga081c474a7a3e607a73080f5b7d6de94c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga081c474a7a3e607a73080f5b7d6de94c">&#9670;&nbsp;</a></span>rc_ringbuf_alloc()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rc_ringbuf_alloc </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structrc__ringbuf__t.html">rc_ringbuf_t</a> *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Allocates memory for a ring buffer and initializes an <a class="el" href="structrc__ringbuf__t.html" title="Struct containing state of a ringbuffer and pointer to dynamically allocated memory. ">rc_ringbuf_t</a> struct. </p>
<p>If buf is already the right size then it is left untouched. Otherwise any existing memory allocated for buf is freed to avoid memory leaks and new memory is allocated.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">buf</td><td>Pointer to user's buffer </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">size</td><td>Number of elements to allocate space for</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns 0 on success or -1 on failure. </dd></dl>

</div>
</div>
<a id="gacc048f71fcf6c35008c4a42a4c646d79"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gacc048f71fcf6c35008c4a42a4c646d79">&#9670;&nbsp;</a></span>rc_ringbuf_free()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rc_ringbuf_free </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structrc__ringbuf__t.html">rc_ringbuf_t</a> *&#160;</td>
          <td class="paramname"><em>buf</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Frees the memory allocated for buffer buf. </p>
<p>Also set the initialized flag to 0 so other functions don't try to access unallocated memory.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">buf</td><td>Pointer to user's buffer</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns 0 on success or -1 on failure. </dd></dl>

</div>
</div>
<a id="gaa9da5cc641aed10a6212df49f72669c3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaa9da5cc641aed10a6212df49f72669c3">&#9670;&nbsp;</a></span>rc_ringbuf_reset()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rc_ringbuf_reset </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structrc__ringbuf__t.html">rc_ringbuf_t</a> *&#160;</td>
          <td class="paramname"><em>buf</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets all values in the buffer to 0.0f and sets the buffer index back to 0. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">buf</td><td>Pointer to user's buffer</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns 0 on success or -1 on failure. </dd></dl>

</div>
</div>
<a id="gaa82925c4c7ea0996b4861c89c131afb3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaa82925c4c7ea0996b4861c89c131afb3">&#9670;&nbsp;</a></span>rc_ringbuf_insert()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rc_ringbuf_insert </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structrc__ringbuf__t.html">rc_ringbuf_t</a> *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>val</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Puts a new float into the ring buffer and updates the index accordingly. </p>
<p>If the buffer was full then the oldest value in the buffer is automatically removed.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">buf</td><td>Pointer to user's buffer </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">val</td><td>The value to be inserted</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns 0 on success or -1 on failure. </dd></dl>

</div>
</div>
<a id="ga178409422c694dab381ab6fd51918801"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga178409422c694dab381ab6fd51918801">&#9670;&nbsp;</a></span>rc_ringbuf_get_value()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double rc_ringbuf_get_value </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structrc__ringbuf__t.html">rc_ringbuf_t</a> *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>position</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Fetches the float which is 'position' steps behind the last value added to the buffer. </p>
<p>If 'position' is given as 0 then the most recent value is returned. The position obviously can't be larger than (buffer size - 1).</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">buf</td><td>Pointer to user's buffer </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">position</td><td>steps back in the buffer to fetch the value from</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns the requested float. Prints an error message and returns -1.0f on error. </dd></dl>

</div>
</div>
<a id="ga0c8d29b891fc18f77dac6cdd6dbe1e24"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga0c8d29b891fc18f77dac6cdd6dbe1e24">&#9670;&nbsp;</a></span>rc_ringbuf_std_dev()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double rc_ringbuf_std_dev </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structrc__ringbuf__t.html">rc_ringbuf_t</a>&#160;</td>
          <td class="paramname"><em>buf</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the standard deviation of all values in the ring buffer. </p>
<p>Note that if the buffer has not yet been filled completely before calling this, then the starting values of 0.0f in the unfilled portion of the buffer will still be part of the calculation.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">buf</td><td>Pointer to user's buffer</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns the standard deviation of all values in the ring buffer. </dd></dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.13-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
