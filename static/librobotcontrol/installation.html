<!-- HTML header for doxygen 1.8.13-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Robot Control Library: Installation &amp; Checking Functionality</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<link rel="search" href="search_opensearch.php?v=opensearch.xml" type="application/opensearchdescription+xml" title="Robot Control Library"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="customdoxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Robot Control Library
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,true,'search.php','Search');
  $(document).ready(function() {
    if ($('.searchresults').length > 0) { searchBox.DOMSearchField().focus(); }
  });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('installation.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">Installation &amp; Checking Functionality </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#installation_s1">Method 1: Use Official BeagleBone Image (recommended)</a></li>
<li class="level1"><a href="#installation_s2">Method 2: Install from Debian Package or Repository</a></li>
<li class="level1"><a href="#installation_s3">Method 3: Installing From Source (not recommended)</a></li>
<li class="level1"><a href="#installation_s4">Additional step for BB Black and Black Wireless with Robotics Cape</a></li>
<li class="level1"><a href="#installation_s5">Checking Functionality</a></li>
</ul>
</div>
<div class="textblock"><h1><a class="anchor" id="installation_s1"></a>
Method 1: Use Official BeagleBone Image (recommended)</h1>
<p>BeagleBoard.org official images come with the librobotcontrol package preinstalled. Follow the instructions at <a class="el" href="flashing.html">Updating BeagleBone Image</a> to make sure you are running the correct image.</p>
<p>After flashing a new image simply reconfigure the package to set the the device tree and configure which program you may want to <a href="runonboot.html">start automatically on boot</a>.</p>
<div class="fragment"><div class="line">sudo dpkg-reconfigure librobotcontrol</div></div><!-- fragment --><p>BeagleBoard.org graciously hosts the latest stable librobotcontrol package in their repositories. On a BeagleBoard product, the package can easily be updated:</p>
<div class="fragment"><div class="line">sudo apt update &amp;&amp; sudo apt upgrade librobotcontrol</div></div><!-- fragment --><h1><a class="anchor" id="installation_s2"></a>
Method 2: Install from Debian Package or Repository</h1>
<p>For installation on other platforms, we provide 32bit armhf and 64-bit x86_64 Debian packages on the <a href="https://github.com/StrawsonDesign/librobotcontrol/releases">GitHub releases page</a>. These can be downloaded and installed like any other debian package. Obviously change the name of the file in the command below to match that of the file you downloaded.</p>
<div class="fragment"><div class="line">sudo dpkg -i librobotcontrol_1.0.2_amd64.deb</div><div class="line">or...</div><div class="line">sudo dpkg -i librobotcontrol_1.0.2_armhf.deb</div></div><!-- fragment --><p>This package installation will also configure the device tree if you are installing on a BeagleBone Black or Black Wireless. Remember this package is still BeagleBone-focused and many of the functions are not applicable to other platforms. However many of them are platform-independent so we provide these packages.</p>
<h1><a class="anchor" id="installation_s3"></a>
Method 3: Installing From Source (not recommended)</h1>
<p>If you insist on compiling and installing from source instead of using the debian packages above, or are king enough to help beta-test and contribute source code then you are welcome to fork the <a href="https://github.com/StrawsonDesign/librobotcontrol">librobotcontrol repository</a>.</p>
<p>An installer script exists to help compile and install from source.</p>
<div class="fragment"><div class="line">debian@beaglebone:~/librobotcontrol$ ./install.sh</div><div class="line"></div><div class="line">To continue, enter 1 to compile and install on BeagleBone</div><div class="line">enter 2 for other platforms (Raspberry Pi, x86, etc..)</div></div><!-- fragment --><p>Option 2 will only install the library and examples, whereas option 1 will also do the following beaglebone-specific steps: compile and install PRU binaries, enable systemd services, and setup the Robotics Cape device tree if necessary.</p>
<p>Each section of the source code (library, examples, project_template, pru_firmware, &amp; services) have their own independent Makefile. If you only want to compile and test one section such as the library itself, just cd to the library folder and make &amp;&amp; sudo make install in just that one directory to avoid recompiling everything unnecessarily.</p>
<h1><a class="anchor" id="installation_s4"></a>
Additional step for BB Black and Black Wireless with Robotics Cape</h1>
<p>After flashing a BeagleBone Black or Black Wireless with a clean image it is necessary to tell it use the Robotics Cape device tree so all of the header pins are configured correctly and all of the necessary drivers will load. This is not necessary for the BeagleBone Blue or when installing a debian package manually.</p>
<p>You can manually setup the device tree following command.</p>
<div class="fragment"><div class="line">sudo configure_robotics_dt.sh</div><div class="line">sudo reboot</div></div><!-- fragment --><p>This step is automatically performed when using the install.sh helper script described above as well as when installing, updating, or reconfiguring the debian package which you likely did if installing from source or installing the debian package manually. It is, however, safe to run in all conditions if you are unsure of whether you need to configure the device tree or not.</p>
<p>To revert to the standard device tree, replace uEnv.txt with the backup that was created by the previous step.</p>
<div class="fragment"><div class="line">sudo cp /boot/uEnv.txt.backup /boot/uEnv.txt</div><div class="line">sudo reboot</div></div><!-- fragment --><p> After reboot, check that the right device tree is loaded with the rc_model program which will print something like this:</p>
<div class="fragment"><div class="line">debian@beaglebone:~$ rc_model</div><div class="line"></div><div class="line">Currently running on a:</div><div class="line">BB_BLACK_RC</div></div><!-- fragment --><p>On the BeagleBone Blue, expect it to say BB_BLUE. If you are using the RoboticsCape on a BealgeBone Black or Black Wireless, make sure it says BB_BLACK_RC or BB_BLACK_W_RC.</p>
<h1><a class="anchor" id="installation_s5"></a>
Checking Functionality</h1>
<p>Once everything is installed, run the rc_test_drivers program to confirm functionality.</p>
<div class="fragment"><div class="line">debian@beaglebone:~$ rc_test_drivers</div><div class="line"></div><div class="line">Kernel: 4.14.54-ti-r63</div><div class="line">BeagleBoard.org Debian Image 2018-07-15</div><div class="line">Debian: 9.5</div><div class="line"></div><div class="line">PASSED: gpio 0</div><div class="line">PASSED: gpio 1</div><div class="line">PASSED: gpio 2</div><div class="line">PASSED: gpio 3</div><div class="line">PASSED: pwm1</div><div class="line">PASSED: pwm2</div><div class="line">PASSED: eqep0</div><div class="line">PASSED: eqep1</div><div class="line">PASSED: eqep2</div><div class="line">PASSED: pru-rproc</div><div class="line">PASSED: uart1</div><div class="line">PASSED: uart2</div><div class="line">PASSED: uart4</div><div class="line">PASSED: uart5</div><div class="line">PASSED: i2c1</div><div class="line">PASSED: i2c2</div><div class="line">PASSED: spi</div><div class="line">PASSED: LED</div><div class="line">PASSED: ADC iio</div><div class="line"></div><div class="line">Currently running on a:</div><div class="line">MODEL_BB_BLUE</div><div class="line">Robot Control library Version:</div><div class="line">1.0.0</div></div><!-- fragment --><p>Any image after 7-15-2018 should pass all tests. If this test indicates that the PRU and ADC are malfunctioning then the bootloader need to be updated by flashing the built-in eMMC storage as described in <a class="el" href="flashing.html">Updating BeagleBone Image</a> section. </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.13-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="manual.html">manual</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
