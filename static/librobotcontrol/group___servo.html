<!-- HTML header for doxygen 1.8.13-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Robot Control Library: Servo</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<link rel="search" href="search_opensearch.php?v=opensearch.xml" type="application/opensearchdescription+xml" title="Robot Control Library"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="customdoxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Robot Control Library
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,true,'search.php','Search');
  $(document).ready(function() {
    if ($('.searchresults').length > 0) { searchBox.DOMSearchField().focus(); }
  });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group___servo.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Servo</div>  </div>
</div><!--header-->
<div class="contents">
<a name="details" id="details"></a><h2 class="groupheader">Description</h2>
<p>Control Servos and Brushless Motor Controllers. </p>
<p>&lt;<a class="el" href="servo_8h.html">rc/servo.h</a>&gt;</p>
<p>The Robotics Cape has 8 3-pin headers for connecting hobby servos and ESCs. These are driven by the PRU for extremely precise signaling with minimal CPU use. Standard 3-pin servo connectors are not polarized so pay close attention to the symbols printed in white silkscreen on the cape before plugging anything in. The black/brown ground wire should always be closest to the cape PCB. The pinnout for these standard 3 pin connectors is as follows.</p>
<ul>
<li>1 Ground</li>
<li>2 6V Power</li>
<li>3 Pulse width signal</li>
</ul>
<p>Both servos and Brushless ESCs expect pulse width signals corresponding to the desired output position or speed. These pulses normally range from 900us to 2100us which usually corresponds to +- 60 degrees of rotation from the neutral position. 1500us usually corresponds to the center position. Many servos work up to +- 90 degrees when given pulse widths in the extended range from 600us to 2400us. Test the limits of your servos very carefully to avoid stalling the servos motors.</p>
<table class="doxtable">
<tr>
<th align="center">Normalized Width </th><th align="center">Pulse Width </th><th align="center">Servo Angle  </th></tr>
<tr>
<td align="center">-1.5 </td><td align="center">600us </td><td align="center">90 deg ccw </td></tr>
<tr>
<td align="center">-1.0 </td><td align="center">900us </td><td align="center">60 deg ccw </td></tr>
<tr>
<td align="center">0.0 </td><td align="center">1500us </td><td align="center">centered </td></tr>
<tr>
<td align="center">1.0 </td><td align="center">2100us </td><td align="center">60 deg cw </td></tr>
<tr>
<td align="center">1.5 </td><td align="center">2400us </td><td align="center">90 deg cw </td></tr>
</table>
<p>Unlike PWM which is concerned with the ratio of pulse width to pulse frequency, servos and ESCs are only concerned with the pulse width and can tolerate a wide range of update frequencies. Servos can typically tolerate update pulses from 5-50hz with more expensive digital models sometimes capable of higher update rates. Brushless ESCs are much more tolerant and typically accept update rates up to 200hz with some multirotor ESCs capable of 400hz when using sufficiently short pulse widths.</p>
<p>Since ESCs drive motor unidirectionally, it makes more sense to think of their normalized throttle as ranging from 0.0 (stopped) to 1.0 (full power). Thus, these functions translate a normalized value from 0.0 to 1.0 to a pulse width between 1000us and 2000us which is a common factory-calibration range for many ESCs. We suggest using the rc_calibrate_escs example program on all ESCs used with the robotics cape to ensure they are calibrated to this exact pulse range.</p>
<p>We HIGHLY recommend the use of ESCs which use the BLHeli firmware because this firmware allows the input pulse range to be programmed to exactly 1000-2000us and the old fashioned calibration mode to be disabled. This prevents accidental triggering of calibration mode during use and removes the need to run rc_calibrate_escs. BLHeli includes a plethora of configurable settings and features such as easily adjustable timing and sounds. More information on the BLHeli open source project here.</p>
<p>Unless calibration mode is disabled, most ESCs will go into a failsafe or calibration mode if the first signals they receive when powered up are not their calibrated minimum pulse width corresponding to the throttle-off condition. Therefore it is necessary for your program to start sending pulses with a normalized value of 0.0 for a second or more before sending any other value to ensure expected operation.</p>
<p>Some ESCs, including those running BLHeli firmware, will wake up but keep the motor idle when receiving pulses slightly below the minimum. This is largely undocumented but we call this "idle" mode. For this reason we allow inputs to rc_send_esc_pulse_normalized and rc_send_esc_pulse_normalized_all to range from -0.1 to 1.0 where 0.0 results in the lowest throttle the ESC allows and -0.1 can be used for idle where the motor is entirely powered off but the ESC is awake.</p>
<p>A recent trend among ESCs is support of "One-Shot" mode which shrinks the pulse range down to 125-250us for reduced latency. Like rc_send_esc_pulse_normalized, these oneshot equivalents also take a range from -0.1 to 1.0 to allow for idle signals.</p>
<dl class="section author"><dt>Author</dt><dd>James Strawson </dd></dl>
<dl class="section date"><dt>Date</dt><dd>3/7/2018 </dd></dl>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ga2b4c5c8c32bac51565fab764ca15384e"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___servo.html#ga2b4c5c8c32bac51565fab764ca15384e">RC_SERVO_CH_MIN</a>&#160;&#160;&#160;1</td></tr>
<tr class="memdesc:ga2b4c5c8c32bac51565fab764ca15384e"><td class="mdescLeft">&#160;</td><td class="mdescRight">servo channels range from 1-8  <a href="#ga2b4c5c8c32bac51565fab764ca15384e">More...</a><br /></td></tr>
<tr class="separator:ga2b4c5c8c32bac51565fab764ca15384e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4c2f94d5932ba7de01baa9dae43f91b2"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___servo.html#ga4c2f94d5932ba7de01baa9dae43f91b2">RC_SERVO_CH_MAX</a>&#160;&#160;&#160;8</td></tr>
<tr class="memdesc:ga4c2f94d5932ba7de01baa9dae43f91b2"><td class="mdescLeft">&#160;</td><td class="mdescRight">servo channels range from 1-8  <a href="#ga4c2f94d5932ba7de01baa9dae43f91b2">More...</a><br /></td></tr>
<tr class="separator:ga4c2f94d5932ba7de01baa9dae43f91b2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gafc9f63116bb9cc27e44b0f6b2082d66a"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___servo.html#gafc9f63116bb9cc27e44b0f6b2082d66a">RC_SERVO_CH_ALL</a>&#160;&#160;&#160;0</td></tr>
<tr class="memdesc:gafc9f63116bb9cc27e44b0f6b2082d66a"><td class="mdescLeft">&#160;</td><td class="mdescRight">providing this as an argument writes the same pulse to all channels  <a href="#gafc9f63116bb9cc27e44b0f6b2082d66a">More...</a><br /></td></tr>
<tr class="separator:gafc9f63116bb9cc27e44b0f6b2082d66a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gafa615e1123aff2a159a28740a28955e9"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___servo.html#gafa615e1123aff2a159a28740a28955e9">RC_ESC_DEFAULT_MIN_US</a>&#160;&#160;&#160;1000</td></tr>
<tr class="separator:gafa615e1123aff2a159a28740a28955e9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gabfd4d610026dcb9cc609193970cbfb59"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___servo.html#gabfd4d610026dcb9cc609193970cbfb59">RC_ESC_DEFAULT_MAX_US</a>&#160;&#160;&#160;2000</td></tr>
<tr class="separator:gabfd4d610026dcb9cc609193970cbfb59"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga002867d4bc4044172843364e977e908d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___servo.html#ga002867d4bc4044172843364e977e908d">RC_ESC_DJI_MIN_US</a>&#160;&#160;&#160;1120</td></tr>
<tr class="separator:ga002867d4bc4044172843364e977e908d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga77951a75da229e6ad3cc2994a421c1ef"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___servo.html#ga77951a75da229e6ad3cc2994a421c1ef">RC_ESC_DJI_MAX_US</a>&#160;&#160;&#160;1920</td></tr>
<tr class="separator:ga77951a75da229e6ad3cc2994a421c1ef"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gabcde569afc59522a776c00a3cf38de7f"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___servo.html#gabcde569afc59522a776c00a3cf38de7f">rc_servo_init</a> (void)</td></tr>
<tr class="memdesc:gabcde569afc59522a776c00a3cf38de7f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Configures the PRU to send servo pulses.  <a href="#gabcde569afc59522a776c00a3cf38de7f">More...</a><br /></td></tr>
<tr class="separator:gabcde569afc59522a776c00a3cf38de7f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga31a88ee18f8eab9a0a8fa6ba4aa8d838"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___servo.html#ga31a88ee18f8eab9a0a8fa6ba4aa8d838">rc_servo_cleanup</a> (void)</td></tr>
<tr class="memdesc:ga31a88ee18f8eab9a0a8fa6ba4aa8d838"><td class="mdescLeft">&#160;</td><td class="mdescRight">Cleans up servo functionality and turns off the power rail.  <a href="#ga31a88ee18f8eab9a0a8fa6ba4aa8d838">More...</a><br /></td></tr>
<tr class="separator:ga31a88ee18f8eab9a0a8fa6ba4aa8d838"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3ac90f23a6793e0a1b841c83565101ef"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___servo.html#ga3ac90f23a6793e0a1b841c83565101ef">rc_servo_power_rail_en</a> (int en)</td></tr>
<tr class="memdesc:ga3ac90f23a6793e0a1b841c83565101ef"><td class="mdescLeft">&#160;</td><td class="mdescRight">enables or disables the 6V power rail to drive servos.  <a href="#ga3ac90f23a6793e0a1b841c83565101ef">More...</a><br /></td></tr>
<tr class="separator:ga3ac90f23a6793e0a1b841c83565101ef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga677c306864d60dcc65011f38b00407da"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___servo.html#ga677c306864d60dcc65011f38b00407da">rc_servo_set_esc_range</a> (int <a class="el" href="group___useful___includes.html#gac6afabdc09a49a433ee19d8a9486056d">min</a>, int max)</td></tr>
<tr class="memdesc:ga677c306864d60dcc65011f38b00407da"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the pulse width range used by the rc_servo_esc_send_pulse_normalized() function.  <a href="#ga677c306864d60dcc65011f38b00407da">More...</a><br /></td></tr>
<tr class="separator:ga677c306864d60dcc65011f38b00407da"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gadbf994173e0b530fe448e94694659b51"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___servo.html#gadbf994173e0b530fe448e94694659b51">rc_servo_send_pulse_us</a> (int ch, int us)</td></tr>
<tr class="memdesc:gadbf994173e0b530fe448e94694659b51"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sends a single pulse of desired width in microseconds to one or all channels.  <a href="#gadbf994173e0b530fe448e94694659b51">More...</a><br /></td></tr>
<tr class="separator:gadbf994173e0b530fe448e94694659b51"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa3227ad3e226810d64a7266f27f39c3b"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___servo.html#gaa3227ad3e226810d64a7266f27f39c3b">rc_servo_send_pulse_normalized</a> (int ch, double input)</td></tr>
<tr class="memdesc:gaa3227ad3e226810d64a7266f27f39c3b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Like rc_send_pulse_us but translates a desired servo position from -1.5 to 1.5 to a corresponding pulse width from 600 to 2400us.  <a href="#gaa3227ad3e226810d64a7266f27f39c3b">More...</a><br /></td></tr>
<tr class="separator:gaa3227ad3e226810d64a7266f27f39c3b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4348b72e1177d53a3f6b69b7bdf54f28"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___servo.html#ga4348b72e1177d53a3f6b69b7bdf54f28">rc_servo_send_esc_pulse_normalized</a> (int ch, double input)</td></tr>
<tr class="memdesc:ga4348b72e1177d53a3f6b69b7bdf54f28"><td class="mdescLeft">&#160;</td><td class="mdescRight">Like rc_send_pulse_normalized but translates a desired esc throttle position from 0 to 1.0 to a corresponding pulse width from 1000 to 2000us.  <a href="#ga4348b72e1177d53a3f6b69b7bdf54f28">More...</a><br /></td></tr>
<tr class="separator:ga4348b72e1177d53a3f6b69b7bdf54f28"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2ac626f7389c25bd8bdf4cf8129a0a1b"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___servo.html#ga2ac626f7389c25bd8bdf4cf8129a0a1b">rc_servo_send_oneshot_pulse_normalized</a> (int ch, double input)</td></tr>
<tr class="memdesc:ga2ac626f7389c25bd8bdf4cf8129a0a1b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Like rc_send_pulse_normalized but translates a desired esc throttle position from 0 to 1.0 to a corresponding pulse width from 125 to 250us.  <a href="#ga2ac626f7389c25bd8bdf4cf8129a0a1b">More...</a><br /></td></tr>
<tr class="separator:ga2ac626f7389c25bd8bdf4cf8129a0a1b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="ga2b4c5c8c32bac51565fab764ca15384e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga2b4c5c8c32bac51565fab764ca15384e">&#9670;&nbsp;</a></span>RC_SERVO_CH_MIN</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RC_SERVO_CH_MIN&#160;&#160;&#160;1</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>servo channels range from 1-8 </p>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="rc_test_escs_8c-example.html#a3">rc_test_escs.c</a>, and <a class="el" href="rc_test_servos_8c-example.html#a1">rc_test_servos.c</a>.</dd>
</dl>
</div>
</div>
<a id="ga4c2f94d5932ba7de01baa9dae43f91b2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga4c2f94d5932ba7de01baa9dae43f91b2">&#9670;&nbsp;</a></span>RC_SERVO_CH_MAX</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RC_SERVO_CH_MAX&#160;&#160;&#160;8</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>servo channels range from 1-8 </p>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="rc_test_escs_8c-example.html#a2">rc_test_escs.c</a>, and <a class="el" href="rc_test_servos_8c-example.html#a0">rc_test_servos.c</a>.</dd>
</dl>
</div>
</div>
<a id="gafc9f63116bb9cc27e44b0f6b2082d66a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gafc9f63116bb9cc27e44b0f6b2082d66a">&#9670;&nbsp;</a></span>RC_SERVO_CH_ALL</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RC_SERVO_CH_ALL&#160;&#160;&#160;0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>providing this as an argument writes the same pulse to all channels </p>

</div>
</div>
<a id="gafa615e1123aff2a159a28740a28955e9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gafa615e1123aff2a159a28740a28955e9">&#9670;&nbsp;</a></span>RC_ESC_DEFAULT_MIN_US</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RC_ESC_DEFAULT_MIN_US&#160;&#160;&#160;1000</td>
        </tr>
      </table>
</div><div class="memdoc">
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="rc_test_escs_8c-example.html#a0">rc_test_escs.c</a>.</dd>
</dl>
</div>
</div>
<a id="gabfd4d610026dcb9cc609193970cbfb59"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gabfd4d610026dcb9cc609193970cbfb59">&#9670;&nbsp;</a></span>RC_ESC_DEFAULT_MAX_US</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RC_ESC_DEFAULT_MAX_US&#160;&#160;&#160;2000</td>
        </tr>
      </table>
</div><div class="memdoc">
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="rc_test_escs_8c-example.html#a1">rc_test_escs.c</a>.</dd>
</dl>
</div>
</div>
<a id="ga002867d4bc4044172843364e977e908d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga002867d4bc4044172843364e977e908d">&#9670;&nbsp;</a></span>RC_ESC_DJI_MIN_US</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RC_ESC_DJI_MIN_US&#160;&#160;&#160;1120</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ga77951a75da229e6ad3cc2994a421c1ef"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga77951a75da229e6ad3cc2994a421c1ef">&#9670;&nbsp;</a></span>RC_ESC_DJI_MAX_US</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RC_ESC_DJI_MAX_US&#160;&#160;&#160;1920</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="gabcde569afc59522a776c00a3cf38de7f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gabcde569afc59522a776c00a3cf38de7f">&#9670;&nbsp;</a></span>rc_servo_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rc_servo_init </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Configures the PRU to send servo pulses. </p>
<p>Also leaves the servo power rail OFF, turn back on with rc_servo_power_rail_en(1) if you need to power servos off of the board.</p>
<dl class="section return"><dt>Returns</dt><dd>0 on success, -1 on failure </dd></dl>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="rc_calibrate_escs_8c-example.html#a2">rc_calibrate_escs.c</a>, <a class="el" href="rc_test_escs_8c-example.html#a5">rc_test_escs.c</a>, and <a class="el" href="rc_test_servos_8c-example.html#a6">rc_test_servos.c</a>.</dd>
</dl>
</div>
</div>
<a id="ga31a88ee18f8eab9a0a8fa6ba4aa8d838"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga31a88ee18f8eab9a0a8fa6ba4aa8d838">&#9670;&nbsp;</a></span>rc_servo_cleanup()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void rc_servo_cleanup </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Cleans up servo functionality and turns off the power rail. </p>
<dl class="section return"><dt>Returns</dt><dd>0 on success, -1 on failure </dd></dl>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="rc_calibrate_escs_8c-example.html#a5">rc_calibrate_escs.c</a>, <a class="el" href="rc_test_escs_8c-example.html#a18">rc_test_escs.c</a>, and <a class="el" href="rc_test_servos_8c-example.html#a17">rc_test_servos.c</a>.</dd>
</dl>
</div>
</div>
<a id="ga3ac90f23a6793e0a1b841c83565101ef"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga3ac90f23a6793e0a1b841c83565101ef">&#9670;&nbsp;</a></span>rc_servo_power_rail_en()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rc_servo_power_rail_en </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>en</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>enables or disables the 6V power rail to drive servos. </p>
<p>The Robotics Cape has a 6V 4A high-efficiency switching regulator to power servos from the 2 cell LiPo battery. DO NOT enable this when using BEC-enabled brushless ESCs as it may damage them. Since brushless ESCs only need the ground and signal pins, it is safest to simply cut or disconnect the middle power wire. This will allow the use of servos and ESCs at the same time. Use the enable and disable functions above to control the power rail in software.</p>
<p>ALso use this to turn off power to the servos for example when the robot is in a paused state to save power or prevent noisy servos from buzzing.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">en</td><td>0 to disable, non-zero to enable</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success, -1 on failure </dd></dl>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="rc_dsm_passthrough_8c-example.html#a7">rc_dsm_passthrough.c</a>, <a class="el" href="rc_test_escs_8c-example.html#a7">rc_test_escs.c</a>, and <a class="el" href="rc_test_servos_8c-example.html#a10">rc_test_servos.c</a>.</dd>
</dl>
</div>
</div>
<a id="ga677c306864d60dcc65011f38b00407da"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga677c306864d60dcc65011f38b00407da">&#9670;&nbsp;</a></span>rc_servo_set_esc_range()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rc_servo_set_esc_range </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>min</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>max</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets the pulse width range used by the rc_servo_esc_send_pulse_normalized() function. </p>
<p>This function is not necessary when using the default range which is RC_ESC_DEFAULT_MIN_US (1000) to RC_ESC_DEFAULT_MAX_US (2000). This is only neccessary when using custom ranges. The most common need for this is when dealing with DJI motor drivers which cannot be calibrated. In this case use the line:</p>
<p>rc_servo_set_esc_range(RC_ESC_DJI_MIN_US, RC_ESC_DJI_MAX_US);</p>
<p>This will set the range to 1120-1920 for DJI motor drivers. Note that the minimum value is what is sent when calling rc_servo_usc_send_pulse_normalized with a desired motor control input of 0. A slightly negative value is still possible which will send a pulse width shorter than the minimum value given here. These negative values shoul dbe avoided with DJI motor drivers as they don't register.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">min</td><td>The minimum pulse width in microseconds </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">max</td><td>The maximum pulse width in microseconds</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success, -1 on failure. </dd></dl>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="rc_test_escs_8c-example.html#a6">rc_test_escs.c</a>.</dd>
</dl>
</div>
</div>
<a id="gadbf994173e0b530fe448e94694659b51"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gadbf994173e0b530fe448e94694659b51">&#9670;&nbsp;</a></span>rc_servo_send_pulse_us()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rc_servo_send_pulse_us </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>ch</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>us</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sends a single pulse of desired width in microseconds to one or all channels. </p>
<p>This function returns right away and the PRU manages the accurate timing of the pulse in the background. Therefore calling this function succesively for each channel will start the pulse for each channel at approximately the same time.</p>
<p>As described above, servos and ESCs require regular pulses of at least 5hz to function. Since these pulses do not have to be accurate in frequency, the user can use these functions to start pulses from a userspace program at convenient locations in their program, such as immediately when new positions are calculated from sensor values.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">ch</td><td>Channel to send signal to (1-8) or 0 to send to all channels. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">us</td><td>Pulse Width in microseconds</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success, -1 on failure </dd></dl>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="rc_dsm_passthrough_8c-example.html#a1">rc_dsm_passthrough.c</a>, <a class="el" href="rc_test_escs_8c-example.html#a13">rc_test_escs.c</a>, and <a class="el" href="rc_test_servos_8c-example.html#a12">rc_test_servos.c</a>.</dd>
</dl>
</div>
</div>
<a id="gaa3227ad3e226810d64a7266f27f39c3b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaa3227ad3e226810d64a7266f27f39c3b">&#9670;&nbsp;</a></span>rc_servo_send_pulse_normalized()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rc_servo_send_pulse_normalized </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>ch</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>input</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Like rc_send_pulse_us but translates a desired servo position from -1.5 to 1.5 to a corresponding pulse width from 600 to 2400us. </p>
<p>We cannot gurantee all servos will operate over the full range from -1.5 to 1.5 as that is normally considered the extended range. -1.0 to 1.0 is a more typical safe range but may not utilize the full range of all servos.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">ch</td><td>Channel to send signal to (1-8) or 0 to send to all channels. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">input</td><td>normalized position from -1.5 to 1.5</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success, -1 on failure </dd></dl>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="rc_test_servos_8c-example.html#a11">rc_test_servos.c</a>.</dd>
</dl>
</div>
</div>
<a id="ga4348b72e1177d53a3f6b69b7bdf54f28"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga4348b72e1177d53a3f6b69b7bdf54f28">&#9670;&nbsp;</a></span>rc_servo_send_esc_pulse_normalized()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rc_servo_send_esc_pulse_normalized </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>ch</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>input</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Like rc_send_pulse_normalized but translates a desired esc throttle position from 0 to 1.0 to a corresponding pulse width from 1000 to 2000us. </p>
<p>This only works as expected if your ESCs are calibrated to accept pulse widths from 1000-2000us. This is best done with an ESC programming tool but can also be done with the rc_calibrate_escs example program that comes installed with this package.</p>
<p>While the normal operating range for the normalized input is 0.0 to 1.0, inputs as low as -0.1 are allowed. This is because many ESC firmwares such as BLHeli will still turn or chirp the motors at 0.0 throttle, but will be stationary and still armed and awake with throttle values slightly lower. We suggest using a throttle of -0.1 for at least a second at the beginnig of your program to wake the ESCs up from sleep but still keep the motors still.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">ch</td><td>Channel to send signal to (1-8) or 0 to send to all channels. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">input</td><td>normalized position from -0.1 to 1.0</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success, -1 on failure </dd></dl>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="rc_calibrate_escs_8c-example.html#a0">rc_calibrate_escs.c</a>, and <a class="el" href="rc_test_escs_8c-example.html#a11">rc_test_escs.c</a>.</dd>
</dl>
</div>
</div>
<a id="ga2ac626f7389c25bd8bdf4cf8129a0a1b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga2ac626f7389c25bd8bdf4cf8129a0a1b">&#9670;&nbsp;</a></span>rc_servo_send_oneshot_pulse_normalized()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rc_servo_send_oneshot_pulse_normalized </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>ch</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>input</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Like rc_send_pulse_normalized but translates a desired esc throttle position from 0 to 1.0 to a corresponding pulse width from 125 to 250us. </p>
<p>A recent trend among ESCs is support of "One-Shot" mode which shrinks the pulse range down to 125-250us for reduced latency. If you are sure your ESCs support this then you may try this function.</p>
<p>While the normal operating range for the normalized input is 0.0 to 1.0, inputs as low as -0.1 are allowed. This is because many ESC firmwares such as BLHeli will still turn or chirp the motors at 0.0 throttle, but will be stationary and still armed and awake with throttle values slightly lower. We suggest using a throttle of -0.1 for at least a second at the beginnig of your program to wake the ESCs up from sleep but still keep the motors still.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">ch</td><td>Channel to send signal to (1-8) or 0 to send to all channels. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">input</td><td>normalized position from -0.1 to 1.0</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success, -1 on failure </dd></dl>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="rc_test_escs_8c-example.html#a12">rc_test_escs.c</a>.</dd>
</dl>
</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.13-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
